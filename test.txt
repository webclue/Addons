
		$suffix = "&selected_section=$_REQUEST[add_selected_section]";
	}

	if ($mode == 'enable_disable' && !empty($_REQUEST['block_id'])) {
		fn_assign_block($_REQUEST);
		exit();
	}

	if ($mode == 'update') {
		fn_update_block($_REQUEST['block'], $_REQUEST['block']['location'], $_REQUEST['redirect_location']);
		$suffix .= "&selected_section=$_REQUEST[redirect_location]";
	}

	if ($mode == 'update_location') {
		fn_update_location($_REQUEST['block']);
		$suffix .= "&selected_section=" . $_REQUEST['block']['location'];
	}

	if ($mode == 'add_items') {
		fn_add_items_to_block($_REQUEST['block_id'], !empty($_REQUEST['block_items']) ? $_REQUEST['block_items'] : '', !empty($_REQUEST['object_id']) ? $_REQUEST['object_id'] : 0, $_REQUEST['block_location'], empty($_REQUEST['is_manage']), !empty($_REQUEST['page']) ? $_REQUEST['page'] : 0);

		$suffix .= "&selected_section=$_REQUEST[redirect_location]";
	}

	if ($mode == 'save_layout') {
		$positions = $_REQUEST['block_positions'];

		if (empty($_REQUEST['object_id']) && empty($_REQUEST['user_choice'])) {
			foreach ($positions as $group_id => $_group) {
				if (!empty($_group)) {
					$block_ids = ex